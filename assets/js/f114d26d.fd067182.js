"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[763],{590:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-01-ros2/week-04-services","title":"Week 4 - Services & Actions","description":"Building Distributed Robotic Systems","source":"@site/docs/module-01-ros2/week-04-services.md","sourceDirName":"module-01-ros2","slug":"/module-01-ros2/week-04-services","permalink":"/docs/module-01-ros2/week-04-services","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-01-ros2/week-04-services.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Week 4 - Services & Actions","sidebar_position":4},"sidebar":"modulesSidebar","previous":{"title":"Week 3 - Topics & Messages","permalink":"/docs/module-01-ros2/week-03-topics"},"next":{"title":"Week 5 - Package Development","permalink":"/docs/module-01-ros2/week-05-packages"}}');var t=s(4848),r=s(8453);const o={title:"Week 4 - Services & Actions",sidebar_position:4},c="Week 4: Advanced Communication Patterns",l={},a=[{value:"Building Distributed Robotic Systems",id:"building-distributed-robotic-systems",level:2},{value:"Deep Dive into ROS 2 Nodes",id:"deep-dive-into-ros-2-nodes",level:2},{value:"Node Lifecycle and Best Practices",id:"node-lifecycle-and-best-practices",level:3},{value:"Executors",id:"executors",level:3},{value:"Topics: Asynchronous Data Streaming",id:"topics-asynchronous-data-streaming",level:2},{value:"Custom Message Types",id:"custom-message-types",level:3},{value:"Topic Monitoring",id:"topic-monitoring",level:3},{value:"Services: Synchronous Communication",id:"services-synchronous-communication",level:2},{value:"Service Design Patterns",id:"service-design-patterns",level:3},{value:"Actions: Complex Task Execution",id:"actions-complex-task-execution",level:2},{value:"Action Server Implementation",id:"action-server-implementation",level:3},{value:"Integration Patterns",id:"integration-patterns",level:2},{value:"Complete Robotic System",id:"complete-robotic-system",level:3},{value:"\ud83c\udfc6 Weekly Project: Integrated ROS 2 System",id:"-weekly-project-integrated-ros-2-system",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"week-4-advanced-communication-patterns",children:"Week 4: Advanced Communication Patterns"})}),"\n",(0,t.jsx)(n.h2,{id:"building-distributed-robotic-systems",children:"Building Distributed Robotic Systems"}),"\n",(0,t.jsx)(n.p,{children:"This week focuses on the practical implementation of ROS 2's core communication patterns. You'll learn how to design and implement nodes that communicate effectively to create complex behaviors."}),"\n",(0,t.jsx)(n.h2,{id:"deep-dive-into-ros-2-nodes",children:"Deep Dive into ROS 2 Nodes"}),"\n",(0,t.jsx)(n.h3,{id:"node-lifecycle-and-best-practices",children:"Node Lifecycle and Best Practices"}),"\n",(0,t.jsx)(n.p,{children:"Proper node design ensures reliability and performance."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="Advanced Node Initialization"',children:"class AdvancedNode(Node):\n    def __init__(self):\n        super().__init__('advanced_node')\n        \n        # Concurrent execution groups\n        self.timer_group = MutuallyExclusiveCallbackGroup()\n        self.service_group = MutuallyExclusiveCallbackGroup()\n        \n        self.create_publishers()\n        self.create_subscriptions()\n        \n    def create_publishers(self):\n        self.pose_publisher = self.create_publisher(PoseStamped, '/robot_pose', 10)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"executors",children:"Executors"}),"\n",(0,t.jsx)(n.p,{children:"ROS 2 supports different execution models:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SingleThreadedExecutor"}),": Default, simple."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MultiThreadedExecutor"}),": concurrently runs callbacks."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"topics-asynchronous-data-streaming",children:"Topics: Asynchronous Data Streaming"}),"\n",(0,t.jsx)(n.h3,{id:"custom-message-types",children:"Custom Message Types"}),"\n",(0,t.jsxs)(n.p,{children:["Define standard messages for your specific domain (e.g., ",(0,t.jsx)(n.code,{children:"CustomSensor.msg"}),")."]}),"\n",(0,t.jsx)(n.h3,{id:"topic-monitoring",children:"Topic Monitoring"}),"\n",(0,t.jsx)(n.p,{children:"Create monitor nodes to track system health."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def update_topic_stats(self, topic_name, msg):\n    # Track frequency and latency\n    pass\n"})}),"\n",(0,t.jsx)(n.h2,{id:"services-synchronous-communication",children:"Services: Synchronous Communication"}),"\n",(0,t.jsx)(n.h3,{id:"service-design-patterns",children:"Service Design Patterns"}),"\n",(0,t.jsx)(n.p,{children:"Services are great for:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parameter Query"}),": Get/Set configuration."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validation"}),": Check if a goal is valid before executing."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="Motion Planning Service"',children:"def plan_path_callback(self, request, response):\n    # Validate\n    if not self.validate_pose(request.start):\n        response.success = False\n        return response\n    \n    # Plan\n    path = self.generate_path(request.start, request.goal)\n    response.path = path\n    response.success = True\n    return response\n"})}),"\n",(0,t.jsx)(n.h2,{id:"actions-complex-task-execution",children:"Actions: Complex Task Execution"}),"\n",(0,t.jsx)(n.admonition,{title:"Why Actions?",type:"warning",children:(0,t.jsxs)(n.p,{children:["Unlike services, ",(0,t.jsx)(n.strong,{children:"Actions"})," are non-blocking and provide feedback. Use them for navigation, manipulation, or anything taking > 1 second."]})}),"\n",(0,t.jsx)(n.h3,{id:"action-server-implementation",children:"Action Server Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class ComplexTaskAction(Node):\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing task...')\n        \n        # Provide Feedback\n        for i in range(10):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                return Result()\n            \n            goal_handle.publish_feedback(Feedback(progress=i*10))\n            time.sleep(1)\n            \n        goal_handle.succeed()\n        return Result(success=True)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-patterns",children:"Integration Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"complete-robotic-system",children:"Complete Robotic System"}),"\n",(0,t.jsx)(n.p,{children:"A typical robot structure:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Perception Node"}),": Publishes sensor data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Processing Node"}),": Fuses data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Planning Node"}),": Service for paths."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control Node"}),": Action for execution."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-weekly-project-integrated-ros-2-system",children:"\ud83c\udfc6 Weekly Project: Integrated ROS 2 System"}),"\n",(0,t.jsx)(n.p,{children:"Build a complete system demonstrating all patterns:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Perception"}),": Camera/Lidar/IMU publishers."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Planning"}),": Path planning service."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control"}),": Motion action interface."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring"}),": System health tracker."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Choose patterns carefully: ",(0,t.jsx)(n.strong,{children:"Topics"})," (Stream), ",(0,t.jsx)(n.strong,{children:"Services"})," (Query), ",(0,t.jsx)(n.strong,{children:"Actions"})," (Task)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"QoS"})," is crucial for real-time performance."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error handling"})," ensures reliability."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);